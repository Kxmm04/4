<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
    <input style="background-color: rgb(66, 66, 255); color:rgb(255, 255, 255); margin-bottom: 20px; " type="button" value="ค้นหา" onclick="run_1()">
    <div id="content"></div>
</body>
</html>
<script>
    $(document).ready(function(){
        loadData();
    }) //แบบ jquery

    function loadData(){
        //console.log("my loadData");
        $.ajax({
            type:"GET", // GET ,POST, PUT, DELETE
            url:"https://rmuti-webp.xcool-win741-rock.co/_webservice/getCustomersList.php",
            async:true, // true(ดีฟอลต์) , false
            data:JSON.stringify(null), // ข้อมูลที่จะส่งไป
            success:function(response){
                console.log("load data success")
                //console.log(response)
                let status = response.status
                let datalist = response.datalist
                console.log(status)
                console.log(datalist)
                datalist.forEach(function(item, index){
                    console.log(item.cus_name)
                })
            },
            error:function(error){
                console.log("load data error");
            },
        })
    } // แบบ javascript ต้องใช้ onload บน body


function run_1() {
    $.ajax({
        type: "GET",
        url: "https://rmuti-webp.xcool-win741-rock.co/_webservice/getCustomersList.php",
        success: function(response){
            let datalist = response.datalist;
            let str_html = `<table border='1' padding='5' cellspacing='0'width='30%'>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Username</th>
                                </tr>`;
            datalist.forEach(function(item){
                str_html += `<tr>
                                <td>${item.cus_id}</td>
                                <td>${item.cus_name}</td>
                                <td>${item.cus_username}</td>
                             </tr>`;
            });
             document.getElementById("content").innerHTML = str_html;
        },
        error: function(){
            console.log("load data error");
        }
    });
}


</script>